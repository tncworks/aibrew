# フィーチャー仕様: 生成AIニュースダイジェスト

**フィーチャーブランチ**: `001-ai-news-digest`  
**作成日**: 2025-11-19  
**ステータス**: Draft  
**入力**: ユーザー説明: "生成AIの進化が早すぎ、それにともない生成AIのLLMモデルや、生成AIを活用したツール、サービスのリリースなど生成AIに関する最新情報を追いかけるのが大変です。そこで、一日５分で読める生成AIを纏めたニュースサイトを作りたいです。ニュースの情報はQiitaやZennを始め技術系投稿サイトやITニュースサイトから取得し、それをLLMを用いて要約など読みやすく加工するイメージです。"

> すべての記述は日本語とし、各ユーザーストーリーが独立して検証できるようにすること。

## ユーザーストーリーとテスト（必須）

> 優先度順に記載する。各ストーリーは単体でMVP価値を提供し、独立して開発・テスト・デプロイできる必要がある。

### ユーザーストーリー1 - 5分で読める日次ダイジェスト（優先度: P1）

忙しいエンジニアとして、毎朝アクセスした際に当日分の生成AIトレンドを5分以内で把握できるよう、厳選された見出しと要約がまとまったダイジェストページを見たい。

**優先理由**: 5分ダイジェストというコア価値を実現する最重要機能であり、これがなければサービスが成立しない。  
**独立したテスト**: 指定日付のダイジェストにアクセスすると、最大10件のエントリが表示され、各エントリにタイトル・100〜150字の要約・元記事リンク・出典ロゴ・更新時刻が揃っていることを確認するE2Eテスト。

**受け入れシナリオ**:

1. **前提** 前日23:59までに取り込んだ記事がある、**操作** ユーザーが当日のダイジェストURLを開く、**結果** 最新日付のエントリが時系列で表示され、1画面で概要を把握できる。  
2. **前提** 1つのトピックに複数出典がある、**操作** ダイジェストを閲覧、**結果** 重複はまとめられ、主要な1本のみが露出し他は「関連ソース」として折り畳まれる。

---

### ユーザーストーリー2 - 興味タグでの絞り込み（優先度: P2）

生成AIツールに特化した情報だけを知りたい読者として、トピックタグ（モデル更新、生成AIツール、ビジネス導入事例など）でダイジェストを即座に絞り込みたい。

**優先理由**: 情報過多を避け、各読者にとって「5分で読める」状態を維持するための差別化要素。  
**独立したテスト**: UIから「LLMモデル」タグを選択すると、該当エントリのみが表示され、表示件数とタグバッジが更新されることを確認するフィルタ機能テスト。

**受け入れシナリオ**:

1. **前提** エントリごとに1〜3個のタグが付与されている、**操作** 読者が「新サービス」タグをタップ、**結果** そのタグを含むエントリだけが残り5件以下になり、画面上部に適用中フィルタが表示される。  
2. **前提** 複数タグ選択に対応している、**操作** 「新サービス」と「業界動向」を同時指定、**結果** 両方のタグを含むエントリのみ表示され、他エントリは非表示になる。

---

### ユーザーストーリー3 - 自動要約品質ゲート（優先度: P3）

自動化を重視する運用者として、要約品質と事実整合性を機械的に検証し、手動レビューなしで公開可否を判定できるワークフローが欲しい。

**優先理由**: 人的コストを排除しつつ信頼できる情報を届けるため、要約の誤り検出と自動修正が不可欠。  
**独立したテスト**: 品質ゲートが低信頼度の要約を自動で差戻し、再要約→再検証→公開までを全自動で完了できることをE2Eテストで確認する。

**受け入れシナリオ**:

1. **前提** 要約に数値の矛盾が含まれる、**操作** 自動ファクトチェック器が走る、**結果** エントリは「再要約待ち」となり公開されない。  
2. **前提** 追加再要約後に信頼スコアがしきい値を超える、**操作** 自動承認フローが発火、**結果** エントリがダイジェストへ昇格し監査ログに「自動承認」と記録される。

---

### エッジケース

- 該当日の収集対象に生成AI関連記事が存在しない場合でも、ダイジェストが空である旨と過去号への導線を表示する。  
- QiitaやZennなど複数ソースが同一記事を転載している場合、出典URLで正規化して重複を排除する。  
- LLMが要約生成に失敗、または確信度が低い場合はプレースホルダー表示と再試行キューを作成する。  
- 自動品質ゲートがしきい値を満たさない場合は最大3回まで再要約し、失敗時はその日の「補欠」リストへ移動させ非公開にする。  
- 速報として大規模リリースが大量発生した場合でも、露出件数を10件以内に抑えるため優先度スコアで間引く。  
- 取得APIがダウンした場合は直近キャッシュを利用し、ソース障害を明示するバナーを出す。

## 要件（必須）

### 機能要件

- **FR-001**: システムは Qiita・Zenn・主要ITニュース等のホワイトリストソースから少なくとも1日3回生成AI関連記事をクロールし、公開日・URL・出典ラベルを取得しなければならない。  
- **FR-002**: システムは URLとタイトル類似度を用いて重複記事を検出し、同一トピックは1件の主要エントリに統合し関連ソースとして紐付けなければならない。  
- **FR-003**: システムは各記事について要約（100〜150字）、キータグ（最大3つ）、推定読了時間、公開日時を含むメタデータを生成し、読者向けダイジェストで表示しなければならない。  
- **FR-004**: 日次ダイジェストは最大10件までのハイライトに限定し、残りは「さらに読む」セクションまたは翌日へ繰り越すルールを実装しなければならない。  
- **FR-005**: 読者はトピックタグによるフィルタとキーワード検索を組み合わせて、関心のあるエントリだけを即座に再表示できなければならない。  
- **FR-006**: 各エントリには元記事へのリンク、関連ソース一覧、要約全文、タグ、出典ロゴ、公開日時が揃っており、1クリックで外部サイトを開ける状態にしなければならない。  
- **FR-007**: システムは自動品質ゲートを実装し、要約テキストの事実検証・トーンチェック・数値整合性判定をすべてLLM/ルールベースで実行し、しきい値を満たしたものだけを公開キューへ昇格しなければならない。  
- **FR-008**: 自動ゲートが差戻したエントリは再要約パイプラインへ戻し、最大3回まで再試行した結果と監査ログを保持しなければならない。  
- **FR-009**: 公開済みダイジェストには発行日時・更新履歴を明記し、コンテンツ更新時に監査ログを残さなければならない。

### 主要エンティティ

- **SourceFeed**: ソース名称、URL、カテゴリ、最終取得時刻、利用規約状態を保持し、クロール対象を管理する。  
- **ArticleCandidate**: 元記事URL、タイトル、取得時刻、要約案、タグ案、類似グループID、信頼度スコアを保持し、公開前の下書きになる。  
- **DigestEntry**: 公開日、露出順位、要約テキスト、タグ、関連ソース、表示制限（最大10件制御）を保持し、読者UIに表示される。  
- **EditorialReview**: レビュアーID、判断（承認/差戻し）、コメント、タイムスタンプ、対象ArticleCandidateを管理するワークフロー履歴。

## 成功指標（必須）

- **SC-001**: ユーザビリティテストで80%以上の読者がダイジェスト1本を5分以内に読み終えたと回答する。  
- **SC-002**: 平日5営業日連続で、各ダイジェストに最低5件のユニークソースを掲載できる。  
- **SC-003**: 自動品質ゲートによる差戻し再要約成功率が90%以上となり、人手介入ゼロで公開できる。  
- **SC-004**: 公開後1週間で訪問者の60%以上がタグフィルタまたは検索を1回以上利用し、欲しい情報に素早く到達したと回答する。  
- **SC-005**: 誤情報・訂正対応件数を月平均0件に抑え、運用コストを従来案の50%以下にする。

## 前提・仮定

1. 初期リリースでは閲覧のみでログインや個別通知は実装しない。  
2. ソースサイトの利用規約に沿ったAPIまたはRSSから取得できることを前提とし、スクレイピングは禁止する。  
3. 日本語要約品質は自動ゲート（LLM二次判定＋ルールベース検証）で担保し、人手レビューを行わない。  
4. 全ての時刻は日本時間 (UTC+9) で表示し、朝9時までに当日版を完成させる。
