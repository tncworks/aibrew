---

description: "フィーチャー実装のためのタスクリストテンプレート"

---

# タスク: [FEATURE NAME]

**入力**: `/specs/[###-feature-name]/` 直下の設計ドキュメント  
**前提**: plan.md（必須）, spec.md（ユーザーストーリー参照）, research.md, data-model.md, contracts/

**テスト**: 以下の例にテストタスクを含めているが、仕様で要求された場合のみ追加する。  
**構成**: タスクはユーザーストーリー単位でグルーピングし、独立実装と独立テストを保証する。

## 形式: `[ID] [P?] [Story] 説明`

- **[P]**: 並列実行可能（ファイル競合なし、依存なし）  
- **[Story]**: 該当ユーザーストーリー (例: US1, US2)  
- 説明には必ず正確なファイルパスを含めること

## パス規約

- **単一プロジェクト**: `src/`, `tests/`  
- **Web**: `backend/src/`, `frontend/src/`  
- **Mobile**: `api/src/`, `ios/src/` or `android/src/`

> ⚠️ 以下のタスクはあくまでサンプルであり、`/speckit.tasks` コマンドまたは手動で必ず差し替えること。

## フェーズ1: セットアップ（共通インフラ）

**目的**: プロジェクト初期化と基本構造の整備

- [ ] T001 プランに従ってプロジェクト構造を作成  
- [ ] T002 [言語] プロジェクトを [フレームワーク] 依存付きで初期化  
- [ ] T003 [P] Lint/Format ツールを設定（`make lint` に連携）

---

## フェーズ2: 基盤整備（ブロッカー）

**目的**: いずれのユーザーストーリーよりも先に完成していなければならない共通要素  
**⚠️ 重要**: このフェーズ完了まではユーザーストーリー作業を開始してはならない

- [ ] T004 DBスキーマとマイグレーションのセットアップ  
- [ ] T005 [P] 認証/認可基盤の構築  
- [ ] T006 [P] APIルーティングとミドルウェア骨格の実装  
- [ ] T007 すべてのストーリーが共有する基礎モデルの作成  
- [ ] T008 エラーハンドリングと構造化ログの整備  
- [ ] T009 環境変数/設定管理の整備

**チェックポイント**: 基盤完了 → ユーザーストーリー開始可

---

## フェーズ3: ユーザーストーリー1 - [タイトル]（優先度: P1） 🎯 MVP

**ゴール**: [ストーリーが提供する価値]  
**独立テスト**: [単体検証方法]

### ユーザーストーリー1のテスト（要求された場合のみ）⚠️

> **必ず実装前にテストを書き、失敗を確認してから開発する (RED → GREEN → REFACTOR)。**

- [ ] T010 [P] [US1] `tests/contract/test_[name].py` に契約テストを追加  
- [ ] T011 [P] [US1] `tests/integration/test_[name].py` に統合テストを追加

### ユーザーストーリー1の実装

- [ ] T012 [P] [US1] `src/models/[entity1].py` にモデル作成  
- [ ] T013 [P] [US1] `src/models/[entity2].py` にモデル作成  
- [ ] T014 [US1] `src/services/[service].py` にサービス実装（T012/T013依存）  
- [ ] T015 [US1] `src/[location]/[file].py` にエンドポイント/機能追加  
- [ ] T016 [US1] バリデーションとエラーハンドリング実装  
- [ ] T017 [US1] 操作ログとメトリクス送信を追加

**チェックポイント**: ユーザーストーリー1が独立して機能しテストがGREENであること

---

## フェーズ4: ユーザーストーリー2 - [タイトル]（優先度: P2）

**ゴール**: [価値]  
**独立テスト**: [検証方法]

### テスト（要求時のみ）⚠️

- [ ] T018 [P] [US2] `tests/contract/test_[name].py` に契約テスト  
- [ ] T019 [P] [US2] `tests/integration/test_[name].py` に統合テスト

### 実装

- [ ] T020 [P] [US2] `src/models/[entity].py` にモデル作成  
- [ ] T021 [US2] `src/services/[service].py` にサービス実装  
- [ ] T022 [US2] `src/[location]/[file].py` にエンドポイント/機能追加  
- [ ] T023 [US2] 必要に応じてUS1コンポーネントと統合

**チェックポイント**: US1/US2とも独立実行可能

---

## フェーズ5: ユーザーストーリー3 - [タイトル]（優先度: P3）

**ゴール**: [価値]  
**独立テスト**: [検証方法]

### テスト（要求時のみ）⚠️

- [ ] T024 [P] [US3] `tests/contract/test_[name].py` に契約テスト  
- [ ] T025 [P] [US3] `tests/integration/test_[name].py` に統合テスト

### 実装

- [ ] T026 [P] [US3] `src/models/[entity].py` にモデル作成  
- [ ] T027 [US3] `src/services/[service].py` にサービス実装  
- [ ] T028 [US3] `src/[location]/[file].py` にエンドポイント/機能追加

**チェックポイント**: すべてのユーザーストーリーが独立動作

---

[必要に応じて追加のユーザーストーリーフェーズを定義]

---

## フェーズN: 仕上げ／横断的対応

**目的**: 複数ストーリーに跨る改善

- [ ] TXXX [P] `docs/` や `quickstart.md` の更新  
- [ ] TXXX コードクリーンアップとリファクタリング  
- [ ] TXXX 性能最適化  
- [ ] TXXX [P] 追加ユニットテスト (`tests/unit/`)  
- [ ] TXXX セキュリティ強化  
- [ ] TXXX `quickstart.md` の検証実施

---

## 依存関係と実行順

### フェーズ依存

- **セットアップ (Phase 1)**: 依存なし、開始直後に着手  
- **基盤 (Phase 2)**: Setup完了が前提、全ユーザーストーリーのブロッカー  
- **ユーザーストーリー (Phase 3+)**: 基盤完了後、優先度順または並列で実行  
- **仕上げ**: 望むユーザーストーリー完了後

### ユーザーストーリー依存

- **US1 (P1)**: 基盤完了後に着手、他ストーリー依存なし  
- **US2 (P2)**: 基盤完了後。US1成果物を参照する場合も独立デリバリー可能にする  
- **US3 (P3)**: 同上

### 各ストーリー内部

- テストを最初に書き失敗を確認 → 実装 → リファクタリング  
- モデル → サービス → エンドポイントの順  
- コア実装完了後に統合テスト → ログ/メトリクス

### 並列実行ヒント

- `[P]` マークのあるセットアップ/基盤/テスト/モデルタスクは並列可  
- ストーリー間は異なる人員で並行可能だが、同一ファイルの同時編集は禁止

---

## 実装戦略

### MVPファースト（US1のみ）

1. フェーズ1: セットアップ  
2. フェーズ2: 基盤（ブロッカー）  
3. フェーズ3: ユーザーストーリー1  
4. **停止&検証**: US1単体のテスト/デモ  
5. 準備が整えばデプロイ/リリース

### 段階的デリバリー

1. セットアップ + 基盤  
2. US1 → テスト → デプロイ/デモ  
3. US2 → テスト → デプロイ/デモ  
4. US3 → テスト → デプロイ/デモ

### 並列チーム戦略

1. チーム全体でセットアップ+基盤  
2. 完了後:
   - Dev A: US1
   - Dev B: US2
   - Dev C: US3

---

## ノート

- `[P]` タスク = 並列可能  
- `[Story]` ラベルでトレーサビリティを確保  
- 各ストーリーは独立完結させる  
- テストは実装前にREDを確認  
- 各タスクまたは論理単位ごとにコミット  
- どの時点でもチェックポイントで停止し検証する  
- 曖昧なタスク、同一ファイルの競合、ストーリー間依存を避ける
